<% provide(:title, "Optimiser") %>

<h1>簡易AFオプティマイザー</h1>

<!-- タブ・メニュー -->
<ul class="nav nav-tabs">
	<li class="active"><a href="#sampleContentA" data-toggle="tab">説明</a></li>
	<li><a href="#sampleContentT" data-toggle="tab">入力</a></li>

	<li><a href="#sampleContentC" data-toggle="tab">結果</a></li>
	<li><a href="#sampleContentE" data-toggle="tab">変更点</a></li>
	<li><a href="#sampleContentH" data-toggle="tab">返信</a></li>

	

</ul>

<!-- タブ内容 -->
<div class="tab-content">
 <div class="tab-pane" id="sampleContentT">
  <br>
	 
		<%= form_for(:data, url: optimise_path, remote: true) do |f| %>
   <%= f.label :累計レリック %>
   <%= f.text_field :relic, class: 'form-control', id: "relic",  placeholder: "例: 7.18e72 または 7.18at ", value: cookies[:relic] %>
   <br>
   <%= f.label :"影率(%) または 影に振ったレリック数 (or 影のレベル)" %>
   <%= f.text_field :bos, class: 'form-control', id: "bos", placeholder: "例: 0.50（50%の場合） ", value: cookies[:bos] %>
   <br>
   <%= f.label :"所持アーティファクト数 + エンチャント数（サルべージは含まず）" %>
   <%= f.number_field :"afc", class: 'form-control', id: "afc", value: cookies[:afc] %>
   
   <br>
   
   
   <%= f.label :ビルド： %><br>
   <label class="radio-inline">
   <%= f.radio_button(:build, "SC", checked: ischeck2(cookies[:build],"SC")) %>  SC <%= image_tag("sc.png", width:"20px") %>
   </label>
   <label class="radio-inline">
   <%= f.radio_button(:build, "PET", checked: ischeck2(cookies[:build],"PET")) %>  PET  <%= image_tag("pet.png", width:"20px") %>
   </label>
   <label class="radio-inline">
   <%= f.radio_button(:build, "CS", checked: ischeck2(cookies[:build],"CS")) %>  CS  <%= image_tag("cs.png", width:"20px") %>
   </label>
   <label class="radio-inline">
   <%= f.radio_button(:build, "HS", checked: ischeck2(cookies[:build],"HS")) %>  HS  <%= image_tag("hs.png", width:"20px") %>
   </label>
   
   <br>

   <br>
   <%= f.label :ゴールド： %><br>
   <label class="radio-inline">
   <%= f.radio_button(:gold, "フェアリー", checked: ischeck2(cookies[:gold],"フェアリー")) %>  フェアリー <%= image_tag("fairy.png", width:"20px") %>
   </label>
   <label class="radio-inline">
   <%= f.radio_button(:gold, "pHoM", checked: ischeck2(cookies[:gold],"pHoM")) %>  pHoM  <%= image_tag("phom.png", width:"20px") %>
   </label>
   <label class="radio-inline">
   <%= f.radio_button(:gold, "チェスターソン", checked: ischeck2(cookies[:gold],"チェスターソン")) %>  チェスター  <%= image_tag("chest.png", width:"20px") %>
   </label>
   
   
   <br>

   
   <br>
   <%= f.label :ヒーローの属性①： %><br>
   <label class="radio-inline">
   <%= f.radio_button(:hero1, "地面", checked: ischeck2(cookies[:hero1],"地面")) %>  地面 <%= image_tag("ground.png", width:"25px") %>
   </label>
   <label class="radio-inline">
   <%= f.radio_button(:hero1, "飛行", checked: ischeck2(cookies[:hero1],"飛行")) %>  飛行  <%= image_tag("fly.png", width:"25px") %>
    </label>
   
   <br>

   
   <br>
   <%= f.label :ヒーローの属性②： %><br>
  
   <label class="radio-inline">
   <%= f.radio_button(:hero2, "近接", checked: ischeck2(cookies[:hero2],"近接")) %>  近接  <%= image_tag("ki.png", width:"25px") %>
   </label>
   <label class="radio-inline">
   <%= f.radio_button(:hero2, "遠隔", checked: ischeck2(cookies[:hero2],"遠隔")) %>  遠隔  <%= image_tag("en.png", width:"25px") %>
   </label>
   <label class="radio-inline">
   <%= f.radio_button(:hero2, "魔術", checked: ischeck2(cookies[:hero2],"魔術")) %>  魔術  <%= image_tag("ma.png", width:"25px") %>
   </label>

   
   <br><br>
   <button type="button" class="btn btn-default" data-toggle="collapse" data-target="#demo">未所持AF選択 ▼</button>
   <div id="demo" class="collapse">
    <br>
    持っていないAFにチェックをいれてください<br>画像クリックでチェックできます。<br>
   <% (0..57).each do |i| %>
   <br>
    <label>
     
    <%= f.check_box :"af#{i}" , id: "afhave#{i}", checked: ischeck(cookies[:"af#{i}"]) %> <%= image_tag("#{image_name(i)}.png", width:"40px") %>
    </label>
   <% end %> 
   </div>
   
   <br><br>
   <label>
   <%= f.check_box :letter , id: "letter", checked: ischeck(cookies[:letter]) %> letter表記(aa,ab,ac,...)で結果を表示する
   </label>
   
   <br><br>
   <label>
   <%= f.check_box :AD , id: "AD", checked: ischeck(cookies[:AD]) %> AD(アーティファクトダメージ)を考慮する
   </label>
   <br><br>
   <label>
   <%= f.check_box :effcheck , id: "effcheck", checked: ischeck(cookies[:effcheck]) %> 影の書をレベルで入力する
   </label>
   <br><br>
   <%= f.submit "保存 + 計算",  class: "btn btn-success" %>
   
   
  <% end %>
  
 <br>
		<span id="follow_form"> </span><br>
		<span id="#tsts_form"> </span>
		
　

	</div>
	
	
	<div class="tab-pane active" id="sampleContentA">
		<br>
		<p>■ v2.1 (2019/09/06) </p><p>v3.2.4に対応しました。</p>
		
		<p>バグ報告・要望はこちらまでお願いします ⇒ <a href="https://forms.gle/uUj82KFCyEsdyeke7">googleフォーム</a> 
		   </p>
		<p>返信は<a href="https://twitter.com/mr_nish_">twitter</a>で行っています。</p>
		
		<hr>
		<p>WEBで使える簡単なAF最適化ツールを作りました。</p>
		<p>設計にあたって参考にしたのは <%= link_to "Mmlh 氏のシート型オプティマイザー", "https://www.reddit.com/r/TapTitans2/comments/bjt1ir/30_optimisers/"%>です。</p>
		<p>できるだけ簡略化して設計したので、本家ツールとの誤差は1%前後あります。</p><hr>
		<p>【使用方法】</p>
		
		<p>累計レリックはステータス(統計)欄で確認して入力してください。</p>
		<p>影率は影の書に振ったレリック（AF説明欄から確認できます）を累計レリックで割った値のことです。</p>
		<p>影率は各自で設定してください。特にこだわりが無い場合は0.5(50%)くらいが良いと思います。</p>
		<p>またトーナメント中など影以外のAFにレリックを振りたい場合は、影の書に振ったレリックをそのまま入力してもらっても大丈夫です。</p>
		<p>ヒーローの属性は、MS付近で最も強いヒーローの属性を入力してください。</p>
		
		<p>未所持AFがある場合は、AF選択タブから持っていないAFにチェックを入れてください</p><br>
		<p></p>
		<%= image_tag("relic22.png") %><br><br>
		<%= image_tag("relic11.png") %><br><br>
		
		
		
		<p>分からないところがある、また動かなくなった値がおかしいなどのバグがありましたらお手数ですが<a href="https://forms.gle/uUj82KFCyEsdyeke7">googleフォーム</a>までお願いします。</p>
		
	</div>

		
	
	<div class="tab-pane" id="sampleContentC">
	  <br>
		
  <div id="result-area"></div>
	
	<table>
	 <tr><td></td><td>適正LV</td><td>アーティファクト</td></tr>
  <tr><td><%= image_tag("Book_of_Shadows.png", width:"30px") %></td><td><div id="af0"></div></td><td><div id="output0"></div></td></tr>
  <tr><td><%= image_tag("Charged_Card.png", width:"30px") %></td><td><div id="af1"></div></td><td><div id="output1"></div></td></tr>
  <tr><td><%= image_tag("Stone_of_the_Valrunes.png", width:"30px") %></td><td><div id="af2"></div></td><td><div id="output2"></div></td></tr>
  <tr><td><%= image_tag("Chest_of_Contentment.png", width:"30px") %></td><td><div id="af3"></div></td><td><div id="output3"></div></td></tr>
  <tr><td><%= image_tag("Heroic_Shield.png", width:"30px") %></td><td><div id="af4"></div></td><td><div id="output4"></div></td></tr>
  <tr><td><%= image_tag("Book_of_Prophecy.png", width:"30px") %></td><td><div id="af5"></div></td><td><div id="output5"></div></td></tr>
  <tr><td><%= image_tag("Khrysos_Bowl.png", width:"30px") %></td><td><div id="af6"></div></td><td><div id="output6"></div></td></tr>
  <tr><td><%= image_tag("Zakynthos_Coin.png", width:"30px") %></td><td><div id="af7"></div></td><td><div id="output7"></div></td></tr>
  <tr><td><%= image_tag("Great_Fay_Medallion.png", width:"30px") %></td><td><div id="af8"></div></td><td><div id="output8"></div></td></tr>
  <tr><td><%= image_tag("Neko_Sculpture.png", width:"30px") %></td><td><div id="af9"></div></td><td><div id="output9"></div></td></tr>
  <tr><td><%= image_tag("Coins_of_Ebizu.png", width:"30px") %></td><td><div id="af10"></div></td><td><div id="output10"></div></td></tr>
  <tr><td><%= image_tag("The_Bronzed_Compass.png", width:"30px") %></td><td><div id="af11"></div></td><td><div id="output11"></div></td></tr>
  <tr><td><%= image_tag("Evergrowing_Stack.png", width:"30px") %></td><td><div id="af12"></div></td><td><div id="output12"></div></td></tr>
  <tr><td><%= image_tag("Flute_of_the_Soloist.png", width:"30px") %></td><td><div id="af13"></div></td><td><div id="output13"></div></td></tr>
  <tr><td><%= image_tag("Heavenly_Sword.png", width:"30px") %></td><td><div id="af14"></div></td><td><div id="output14"></div></td></tr>
  <tr><td><%= image_tag("Divine_Retribution.png", width:"30px") %></td><td><div id="af15"></div></td><td><div id="output15"></div></td></tr>
  <tr><td><%= image_tag("Drunken_Hammer.png", width:"30px") %></td><td><div id="af16"></div></td><td><div id="output16"></div></td></tr>
  <tr><td><%= image_tag("Samosek_Sword.png", width:"30px") %></td><td><div id="af17"></div></td><td><div id="output17"></div></td></tr>
  <tr><td><%= image_tag("The_Retaliator.png", width:"30px") %></td><td><div id="af18"></div></td><td><div id="output18"></div></td></tr>
  <tr><td><%= image_tag("Stryfe's_Peace.png", width:"30px") %></td><td><div id="af19"></div></td><td><div id="output19"></div></td></tr>
  <tr><td><%= image_tag("Hero's_Blade.png", width:"30px") %></td><td><div id="af20"></div></td><td><div id="output20"></div></td></tr>
  <tr><td><%= image_tag("The_Sword_of_Storms.png", width:"30px") %></td><td><div id="af21"></div></td><td><div id="output21"></div></td></tr>
  <tr><td><%= image_tag("Furies_Bow.png", width:"30px") %></td><td><div id="af22"></div></td><td><div id="output22"></div></td></tr>
  <tr><td><%= image_tag("Charm_of_the_Ancient.png", width:"30px") %></td><td><div id="af23"></div></td><td><div id="output23"></div></td></tr>
  <tr><td><%= image_tag("Tiny_Titan_Tree.png", width:"30px") %></td><td><div id="af24"></div></td><td><div id="output24"></div></td></tr>
  <tr><td><%= image_tag("Helm_of_Hermes.png", width:"30px") %></td><td><div id="af25"></div></td><td><div id="output25"></div></td></tr>
  <tr><td><%= image_tag("Fruit_of_Eden.png", width:"30px") %></td><td><div id="af26"></div></td><td><div id="output26"></div></td></tr>
  <tr><td><%= image_tag("Influential_Elixir.png", width:"30px") %></td><td><div id="af27"></div></td><td><div id="output27"></div></td></tr>
  <tr><td><%= image_tag("O'Ryan's_Charm.png", width:"30px") %></td><td><div id="af28"></div></td><td><div id="output28"></div></td></tr>
  <tr><td><%= image_tag("Heart_of_Storms.png", width:"30px") %></td><td><div id="af29"></div></td><td><div id="output29"></div></td></tr>
  <tr><td><%= image_tag("Apollo_Orb.png", width:"30px") %></td><td><div id="af30"></div></td><td><div id="output30"></div></td></tr>
  <tr><td><%= image_tag("Earrings_of_Portara.png", width:"30px") %></td><td><div id="af31"></div></td><td><div id="output31"></div></td></tr>
  <tr><td><%= image_tag("Avian_Feather.png", width:"30px") %></td><td><div id="af32"></div></td><td><div id="output32"></div></td></tr>
  <tr><td><%= image_tag("Corrupted_Rune_Heart.png", width:"30px") %></td><td><div id="af33"></div></td><td><div id="output33"></div></td></tr>
  <tr><td><%= image_tag("Durendal_Sword.png", width:"30px") %></td><td><div id="af34"></div></td><td><div id="output34"></div></td></tr>
  <tr><td><%= image_tag("Helheim_Skull.png", width:"30px") %></td><td><div id="af35"></div></td><td><div id="output35"></div></td></tr>
  <tr><td><%= image_tag("Oath's_Burden.png", width:"30px") %></td><td><div id="af36"></div></td><td><div id="output36"></div></td></tr>
  <tr><td><%= image_tag("Crown_of_the_Constellation.png", width:"30px") %></td><td><div id="af37"></div></td><td><div id="output37"></div></td></tr>
  <tr><td><%= image_tag("Titania's_Sceptre.png", width:"30px") %></td><td><div id="af38"></div></td><td><div id="output38"></div></td></tr>
  <tr><td><%= image_tag("Fagin's_Grip.png", width:"30px") %></td><td><div id="af39"></div></td><td><div id="output39"></div></td></tr>
  <tr><td><%= image_tag("Ring_of_Calisto.png", width:"30px") %></td><td><div id="af40"></div></td><td><div id="output40"></div></td></tr>
  <tr><td><%= image_tag("Blade_of_Damocles.png", width:"30px") %></td><td><div id="af41"></div></td><td><div id="output41"></div></td></tr>
  <tr><td><%= image_tag("Helmet_of_Madness.png", width:"30px") %></td><td><div id="af42"></div></td><td><div id="output42"></div></td></tr>
  <tr><td><%= image_tag("Titanium_Plating.png", width:"30px") %></td><td><div id="af43"></div></td><td><div id="output43"></div></td></tr>
  <tr><td><%= image_tag("Moonlight_Bracelet.png", width:"30px") %></td><td><div id="af44"></div></td><td><div id="output44"></div></td></tr>
  <tr><td><%= image_tag("Amethyst_Staff.png", width:"30px") %></td><td><div id="af45"></div></td><td><div id="output45"></div></td></tr>
  <tr><td><%= image_tag("Sword_of_the_Royals.png", width:"30px") %></td><td><div id="af46"></div></td><td><div id="output46"></div></td></tr>
  <tr><td><%= image_tag("Spearit's_Vigil.png", width:"30px") %></td><td><div id="af47"></div></td><td><div id="output47"></div></td></tr>
  <tr><td><%= image_tag("The_Cobalt_Plate.png", width:"30px") %></td><td><div id="af48"></div></td><td><div id="output48"></div></td></tr>
  <tr><td><%= image_tag("Sigils_of_Judgement.png", width:"30px") %></td><td><div id="af49"></div></td><td><div id="output49"></div></td></tr>
  <tr><td><%= image_tag("Foliage_of_the_Keeper.png", width:"30px") %></td><td><div id="af50"></div></td><td><div id="output50"></div></td></tr>
  <tr><td><%= image_tag("Invader's_Gjalarhorn.png", width:"30px") %></td><td><div id="af51"></div></td><td><div id="output51"></div></td></tr>
  <tr><td><%= image_tag("Titan's_Mask.png", width:"30px") %></td><td><div id="af52"></div></td><td><div id="output52"></div></td></tr>
  <tr><td><%= image_tag("Royal_Toxin.png", width:"30px") %></td><td><div id="af53"></div></td><td><div id="output53"></div></td></tr>
  <tr><td><%= image_tag("Laborer's_Pendant.png", width:"30px") %></td><td><div id="af54"></div></td><td><div id="output54"></div></td></tr>
  <tr><td><%= image_tag("Bringer_of_Ragnarok.png", width:"30px") %></td><td><div id="af55"></div></td><td><div id="output55"></div></td></tr>
  <tr><td><%= image_tag("Parchment_of_Foresight.png", width:"30px") %></td><td><div id="af56"></div></td><td><div id="output56"></div></td></tr>
  <tr><td><%= image_tag("Elixir_of_Eden.png", width:"30px") %></td><td><div id="af57"></div></td><td><div id="output57"></div></td></tr>
    

</table>
<br>
このページに表示されているAFレベルをオプティ2の入力欄に上書きできます。
<br><br>
<%= form_for(:data_export, url: export_path, remote: true) do |f| %>
  <%= f.submit "適用",  class: "btn btn-primary", data: { confirm: "OK?"} %>
<% end %>

		
	</div>
	<div class="tab-pane" id="sampleContentE">
	 <%= render 'layouts/log' %>
	 
	 
	 </div>
	 <div class="tab-pane" id="sampleContentH">
	 <%= render 'layouts/hensin' %>
	 
	 
	 </div>

</div>

